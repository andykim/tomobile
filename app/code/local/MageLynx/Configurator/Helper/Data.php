<? $GLOBALS['_466378453_']=Array(base64_decode('c3Ry' .'X3JlcGxhY2U='),base64_decode('Z2V0Vm' .'F' .'sdW' .'U' .'='),base64_decode('aXNfaW50'),base64_decode('bGli' .'eG1sX3Vz' .'ZV' .'9pbnRlcm5h' .'bF9lcnJ' .'vcnM='),base64_decode('' .'bG' .'lieG1sX' .'2Ns' .'ZWFyX2' .'V' .'ycm9ycw=='),base64_decode('bGlie' .'G' .'1sX' .'3' .'VzZV9pbnRl' .'cm5hbF9lcnJvcnM='),base64_decode('aXNf' .'b2J' .'q' .'Z' .'WN' .'0')); ?><? function _46121352($i){$a=Array('cHJlZGVmaW5lZF9vcHRpb25z','fHw=','Ig==','cHJlZGVmaW5lZF9vcHRpb25z','Y29uZmlndXJhdG9yL3NldHRpbmdzL2NvbG9y','Y29uZmlndXJhdG9y','RXJyb3Igd2hlbiBwYXJzaW5nIHByb2R1Y3QgcHJldmlldyBjb25maWcgWE1MOiAlcw==','bGF5ZXJz','ImxheWVycyIgdGFnIGlzIG5vdCBzcGVjaWZpZWQ=','bGF5ZXJz','Y29kZQ==','cGFyYW1ldGVyICJjb2RlIiBub3Qgc3BlY2lmaWVkIGZvciBsYXllciAiJXMi','Y29uZmlndXJhdG9yL2xheWVy','Y29kZQ==','TGF5ZXIgd2l0aCBjb2RlICIlcyIgbm90IGV4aXN0cw==','Y29kZQ==','bGF5ZXJz','bGF5ZXJz','b3B0aW9ucw==');return base64_decode($a[$i]);} ?><?php class MageLynx_Configurator_Helper_Data extends Mage_Core_Helper_Abstract{private function _xml_exception($_0){Mage::throwException(Mage::helper("configurator")->__("Invalid product XML config: %s",$_0));}public function getAttributeOption($_1,$_2){return $this->getOptionCollection($_1)->addFieldToFilter("main_table.option_id",array("eq"=>$_2))->getFirstItem();}public function getAttributeOptionMapping($_3){$_4=array();if($_3->getCustomOption(_46121352(0))){$_5=Zend_Json::decode($GLOBALS['_466378453_'][0](_46121352(1),_46121352(2),$_3->getCustomOption(_46121352(3))->$GLOBALS['_466378453_'][1]()));foreach($_5 as $_6 => $_7){if($GLOBALS['_466378453_'][2]($_6)){if($_6 == Mage::getStoreConfig(_46121352(4)))continue;$_4[$_6]=$_7;}}}return $_4;}public function parsePreviewConfig($_3){$_8="<?xml version=\"1.0\" encoding=\"iso-8859-1\" ?>" .$_3->getConfiguratorConfig();$_9=$GLOBALS['_466378453_'][3](true);try{$_10=new Zend_Config_Xml($_8);$_10=$_10->toArray();}catch(Excception $_11){$this->_xml_exception(Mage::helper(_46121352(5))->__(_46121352(6),$_11->getMessage()));}$GLOBALS['_466378453_'][4]();$GLOBALS['_466378453_'][5]($_9);return $_10;}public function getPreviewData($_3){$_10=$this->parsePreviewConfig($_3);if(!isset($_10[_46121352(7)])){$this->_xml_exception($this->__(_46121352(8)));}$_12=array();foreach($_10[_46121352(9)]as $_13 => $_14){if(!isset($_14[_46121352(10)])){$this->_xml_exception($this->__(_46121352(11),$_13));}$_15=Mage::getModel(_46121352(12))->loadByCode($_14[_46121352(13)]);if(!$_15->getId()){$this->_xml_exception($this->__(_46121352(14),$_14[_46121352(15)]));}$_16=$_15->getOptionCollection()->toArray();$_12[_46121352(16)][$_15->getCode()]=$_14;$_12[_46121352(17)][$_15->getCode()][_46121352(18)]=$_16;}return $_12;}public function getColorAttribute(){if(Mage::getStoreConfig("configurator/settings/color")){$_17=Mage::getResourceModel("catalog/product_attribute_collection")->addFieldToFilter("main_table.`attribute_id`",array("eq"=>Mage::getStoreConfig("configurator/settings/color")))->getFirstItem();if($_17->getId()){return $_17;}}return false;}public function getOptionCollection($_1){return Mage::getResourceModel("configurator/attribute_option_collection")->addFieldToFilter("main_table.attribute_id",array("eq"=> $GLOBALS['_466378453_'][6]($_1)?$_1->getAttributeId():$_1));}}
